-- データサイエンティスト試験対策アプリ 初期データ投入

-- 1. 試験設定
INSERT INTO public.exam_settings (total_questions, passing_score, time_limit_minutes)
VALUES (20, 70.00, NULL)
ON CONFLICT DO NOTHING;

-- 2. カテゴリ（親カテゴリ）
INSERT INTO public.categories (id, name, parent_id, display_order, description) VALUES
(1, 'データサイエンス力', NULL, 1, '統計学、機械学習、データ分析に関する知識'),
(2, 'データエンジニアリング力', NULL, 2, 'データ処理、プログラミング、システム設計に関する知識'),
(3, 'ビジネス力', NULL, 3, 'ビジネス理解、コミュニケーション、プロジェクト管理に関する知識'),
(4, 'リテラシー', NULL, 4, 'データ・AI利活用の基礎知識')
ON CONFLICT (id) DO NOTHING;

-- 3. カテゴリ（子カテゴリ）
INSERT INTO public.categories (id, name, parent_id, display_order, description) VALUES
(11, '統計数理基礎', 1, 1, '確率、統計の基礎知識'),
(12, '推定・検定', 1, 2, '統計的推定と仮説検定'),
(13, '機械学習', 1, 3, '教師あり学習、教師なし学習の基礎'),
(14, '深層学習', 1, 4, 'ニューラルネットワークと深層学習'),
(15, '自然言語処理', 1, 5, 'テキスト処理とNLP技術'),

(21, 'SQL', 2, 1, 'データベース操作とクエリ'),
(22, '基礎プログラミング', 2, 2, 'Pythonなどのプログラミング基礎'),
(23, 'データ構造', 2, 3, 'データ構造とアルゴリズム'),
(24, 'クラウド技術', 2, 4, 'クラウドサービスとアーキテクチャ'),

(31, 'ビジネスマインド', 3, 1, 'ビジネス思考と問題解決'),
(32, 'データ倫理', 3, 2, 'データ・AI倫理とコンプライアンス'),
(33, 'プロジェクトマネジメント', 3, 3, 'プロジェクト管理とリスク管理'),

(41, '社会におけるデータ・AI利活用', 4, 1, 'データ・AIの社会実装'),
(42, 'データリテラシー', 4, 2, 'データの読み書き'),
(43, 'データ・AI利活用における留意事項', 4, 3, 'セキュリティとプライバシー')
ON CONFLICT (id) DO NOTHING;

-- シーケンスのリセット
SELECT setval('categories_id_seq', (SELECT MAX(id) FROM categories) + 1, false);

-- 4. サンプル問題（データサイエンス力）
INSERT INTO public.questions (category_id, question_text, option_a, option_b, option_c, option_d, correct_answer, explanation, difficulty, source, is_approved) VALUES

-- 統計数理基礎
(11, '標準偏差の説明として最も適切なものはどれか。',
'データの中央値を示す指標',
'データのばらつきを示す指標',
'データの最頻値を示す指標',
'データの合計値を示す指標',
'b',
'標準偏差はデータのばらつき（散らばり具合）を表す統計量です。値が大きいほどデータが平均から離れていることを示します。',
2, 'manual', true),

(11, '正規分布の特徴として誤っているものはどれか。',
'平均値と中央値が一致する',
'左右対称な釣鐘型の分布である',
'すべてのデータが平均値に等しい',
'標準偏差によって形状が決まる',
'c',
'正規分布では平均値を中心に左右対称ですが、すべてのデータが平均値に等しいわけではありません。データにはばらつきがあります。',
2, 'manual', true),

(11, '相関係数の値の範囲として正しいものはどれか。',
'0から1の間',
'-1から0の間',
'-1から1の間',
'-∞から+∞の間',
'c',
'相関係数は-1から1の間の値を取ります。1に近いほど正の相関、-1に近いほど負の相関、0に近いほど無相関を示します。',
1, 'manual', true),

-- 推定・検定
(12, '帰無仮説の説明として正しいものはどれか。',
'証明したい仮説',
'否定したい仮説',
'常に正しい仮説',
'データから直接導かれる仮説',
'b',
'帰無仮説は統計的検定において否定したい仮説です。データに基づいて帰無仮説を棄却できれば、対立仮説が支持されます。',
3, 'manual', true),

(12, 'p値の説明として最も適切なものはどれか。',
'仮説が正しい確率',
'帰無仮説のもとで、観測されたデータまたはそれ以上に極端なデータが得られる確率',
'対立仮説が正しい確率',
'サンプルサイズの大きさ',
'b',
'p値は帰無仮説が真である場合に、観測された統計量またはそれより極端な値が得られる確率です。一般に0.05より小さければ有意とされます。',
3, 'manual', true),

-- 機械学習
(13, '教師あり学習の説明として正しいものはどれか。',
'正解ラベルのないデータから学習する',
'正解ラベル付きのデータから学習する',
'報酬に基づいて学習する',
'人間が逐一指示を出して学習する',
'b',
'教師あり学習は、入力データと正解ラベル（目的変数）のペアを用いて学習するアプローチです。分類や回帰がこれに含まれます。',
2, 'manual', true),

(13, '過学習（オーバーフィッティング）の説明として正しいものはどれか。',
'訓練データに対する性能は高いが、テストデータに対する性能が低い状態',
'訓練データとテストデータの両方で性能が低い状態',
'モデルが単純すぎる状態',
'学習回数が少なすぎる状態',
'a',
'過学習は訓練データに過度に適合し、未知データへの汎化性能が低下した状態です。正則化や交差検証で対策できます。',
2, 'manual', true),

(13, 'ランダムフォレストの説明として正しいものはどれか。',
'単一の決定木を使用する手法',
'複数の決定木の予測を組み合わせるアンサンブル手法',
'ニューラルネットワークの一種',
'線形回帰の拡張手法',
'b',
'ランダムフォレストは複数の決定木を構築し、それらの予測を統合するアンサンブル学習手法です。過学習を抑制し、高い予測性能を実現します。',
2, 'manual', true),

-- データエンジニアリング力
(21, 'SQLのJOIN句の説明として正しいものはどれか。',
'テーブルのデータを削除する',
'複数のテーブルを結合する',
'データを並び替える',
'データを集計する',
'b',
'JOIN句は複数のテーブルを特定の条件で結合するために使用します。INNER JOIN、LEFT JOIN、RIGHT JOINなどの種類があります。',
2, 'manual', true),

(21, 'GROUP BY句の用途として正しいものはどれか。',
'データを特定の列で並び替える',
'データを特定の列でグループ化して集計する',
'データを特定の列で絞り込む',
'データを特定の列で結合する',
'b',
'GROUP BY句は指定した列の値が同じ行をグループ化し、COUNT、SUM、AVGなどの集計関数と組み合わせて使用します。',
2, 'manual', true),

(22, 'Pythonのリスト内包表記の利点として正しいものはどれか。',
'コードが読みやすく簡潔に書ける',
'実行速度が遅くなる',
'メモリ使用量が増える',
'エラーが発生しやすくなる',
'a',
'リスト内包表記は、forループを使った従来の書き方よりも簡潔で読みやすいコードを書くことができ、多くの場合パフォーマンスも向上します。',
2, 'manual', true),

(23, 'スタック構造の特徴として正しいものはどれか。',
'FIFO（先入れ先出し）',
'LIFO（後入れ先出し）',
'ランダムアクセス可能',
'データの並び替えが自動的に行われる',
'b',
'スタックはLIFO（Last In First Out：後入れ先出し）の原則に従うデータ構造です。最後に追加された要素が最初に取り出されます。',
2, 'manual', true),

-- ビジネス力
(31, 'MECE（Mutually Exclusive and Collectively Exhaustive）の説明として正しいものはどれか。',
'重複なく漏れなく分類する考え方',
'データを可能な限り詳細に分類する考え方',
'重要度の高い順に分類する考え方',
'時系列順に分類する考え方',
'a',
'MECEは「相互に排他的で、全体として網羅的」という意味で、論理的思考の基本原則です。重複や漏れのない分類を行います。',
2, 'manual', true),

(32, '個人情報保護法における個人情報の定義に含まれないものはどれか。',
'氏名',
'生年月日',
'メールアドレス',
'統計データ（個人が特定できない形に加工されたもの）',
'd',
'個人が特定できない形に適切に加工された統計データは個人情報には該当しません。個人情報保護法では特定の個人を識別できる情報が対象です。',
2, 'manual', true),

-- リテラシー
(41, 'AIの社会実装における課題として最も適切でないものはどれか。',
'アルゴリズムのバイアス',
'プライバシーの保護',
'説明可能性の確保',
'AIによる完全無欠な判断',
'd',
'AIは完全無欠ではなく、データや学習方法によって誤りや偏りが生じます。バイアス、プライバシー、説明可能性は重要な課題です。',
2, 'manual', true),

(42, 'データの可視化における適切なグラフの選択として、時系列データの推移を示すのに最も適しているものはどれか。',
'円グラフ',
'折れ線グラフ',
'散布図',
'ヒストグラム',
'b',
'折れ線グラフは時間経過に伴う値の変化を視覚的に表現するのに最適です。トレンドや周期性を把握しやすくなります。',
1, 'manual', true),

(43, 'AIシステムのセキュリティリスクとして考えられるものはどれか。',
'敵対的サンプル攻撃によるモデルの誤判定',
'モデルの精度向上',
'データの自動収集',
'処理速度の向上',
'a',
'敵対的サンプル攻撃は、AIモデルを意図的に誤判定させるように設計された入力データです。セキュリティ対策が必要です。',
3, 'manual', true),

-- さらに追加問題
(13, 'k-meansクラスタリングの説明として正しいものはどれか。',
'教師あり学習の分類手法',
'教師なし学習のクラスタリング手法',
'時系列データの予測手法',
'次元削減の手法',
'b',
'k-meansはラベルのないデータをk個のクラスタに分類する教師なし学習の代表的な手法です。各データ点を最も近い重心のクラスタに割り当てます。',
2, 'manual', true),

(14, 'ニューラルネットワークの活性化関数の役割として正しいものはどれか。',
'データを正規化する',
'非線形性を導入する',
'学習率を調整する',
'過学習を防ぐ',
'b',
'活性化関数はニューラルネットワークに非線形性を導入し、複雑なパターンを学習可能にします。ReLU、sigmoid、tanhなどがあります。',
3, 'manual', true);

-- 問題IDシーケンスのリセット
SELECT setval('questions_id_seq', (SELECT MAX(id) FROM questions) + 1, false);

-- 完了メッセージ
SELECT 'Initial data seeding completed successfully!' as status;
