# データサイエンティスト試験対策アプリ - 要件定義書

## 1. プロジェクト概要

データサイエンティスト検定リテラシーレベルの試験対策用Webアプリケーション。
AIが過去問を参考に問題を生成し、ユーザーが回答、正答率と合格可能性を判定する。

## 2. 技術スタック

- **フロントエンド**: Next.js 14 (App Router) + TypeScript + Tailwind CSS
- **バックエンド**: Next.js API Routes
- **データベース**: Supabase (PostgreSQL)
- **認証**: Supabase Auth
- **AI**: OpenAI API (問題生成)
- **デプロイ**: Vercel
- **PDF処理**: pdf-parse または pdf.js

## 3. 主要機能

### 3.1 ユーザー機能

#### 認証
- ユーザー登録（メール + パスワード）
- ログイン/ログアウト
- ロール: 一般ユーザー / 管理者

#### 試験受験
- 4択問題の出題
- カテゴリ別出題対応
- 回答選択
- 即時採点と解説表示
- 試験終了後の成績表示
  - 正答率
  - カテゴリ別正答率
  - 合格可能性判定

#### 学習履歴
- 過去の受験履歴閲覧
- カテゴリ別の苦手分野分析
- 正答率の推移グラフ

### 3.2 管理者機能

#### 問題管理
- 過去問PDFのアップロード
- PDFからの問題抽出（手動確認あり）
- 問題の手動作成・編集・削除
- カテゴリ割り当て

#### 試験設定
- 出題数の設定
- カテゴリ別出題比率の設定
- 合格基準点の設定
- 試験時間の設定（オプション）

#### 成績管理
- 全ユーザーの成績閲覧
- ユーザー別詳細成績
- 統計情報（平均点、合格率など）
- データエクスポート（CSV）

#### AI設定
- 使用するAIモデルの選択
- 問題生成プロンプトのカスタマイズ
- 生成された問題のレビュー・承認

## 4. 試験範囲カテゴリ

### 4.1 データサイエンス力
- 線形代数基礎
- 微分・積分基礎
- 集合論基礎
- 統計数理基礎
- 洞察、性質・関係性
- 推定・検定
- アソシエーション分析
- 因果推論
- データ確認
- 俯瞰・メタ思考
- データ理解
- サンプリング
- データクレンジング
- データ加工
- 特徴量エンジニアリング
- 方向性定義
- 軸だし
- 表現・実装技法
- 意味抽出
- 回帰・分類
- 統計的評価
- 機械学習
- 深層学習
- 時系列分析
- クラスタリング
- ネットワーク分析
- レコメンド
- 自然言語処理
- 画像認識
- 映像認識
- 音声認識
- 大規模言語モデル

### 4.2 データエンジニアリング力
- システム企画、システム設計
- アーキテクチャ設計
- クライアント技術、通信技術
- データ抽出、データ収集
- データ構造の基礎知識
- テーブル定義、DWH
- 分散技術、クラウド
- フィルタリング処理、ソート処理
- 結合処理、前処理
- マッピング処理、サンプリング処理
- 集計処理、変換・演算処理
- データ出力、データ展開、データ連携
- 基礎プログラミング
- 拡張プログラミング
- AIサービス活用
- アルゴリズム
- 分析プログラム
- SQL
- ITセキュリティの基礎知識
- 攻撃と防御手法
- 暗号化技術、認証
- AutoML、MLOps、AIOps
- プロンプトエンジニアリング
- 生成AIのコーディング支援

### 4.3 ビジネス力
- ビジネスマインド
- データ･AI倫理
- コンプライアンス
- MECE、構造化能力
- 言語化能力
- ストーリーライン
- ドキュメンテーション
- 説明能力
- AI活用検討
- KPI、スコーピング
- データ入手
- 分析アプローチ設計
- 生成AI活用
- 統計情報への正しい理解
- ビジネス観点での理解
- 意味合いの抽出･洞察
- 評価･改善の仕組み
- 契約、権利保護
- プロジェクト発足
- リソースマネジメント
- リスクマネジメント

### 4.4 リテラシーレベル詳細

#### 1. 社会におけるデータ・AI利活用
- 社会で起きている変化
- 社会で活用されているデータ
- データ・AIの活用領域
- データ・AI利活用のための技術
- データ・AI利活用の現場
- データ・AI利活用の最新動向

#### 2. データリテラシー
- データを読む
- データを説明する
- データを扱う

#### 3. データ・AI利活用における留意事項
- データ・AIを扱う上での留意事項
- データ・AIを守る上での留意事項

## 5. データベーススキーマ（案）

### users (Supabase Authで管理)
- id (UUID, PK)
- email
- role (user / admin)
- created_at

### categories
- id (SERIAL, PK)
- name (カテゴリ名)
- parent_id (親カテゴリ、階層構造用)
- display_order

### questions
- id (SERIAL, PK)
- category_id (FK)
- question_text
- option_a
- option_b
- option_c
- option_d
- correct_answer (a/b/c/d)
- explanation (解説)
- difficulty (難易度 1-5)
- source (manual / ai_generated / pdf_imported)
- source_pdf_id (FK, nullable)
- is_approved (管理者承認済みフラグ)
- created_by (FK to users)
- created_at
- updated_at

### pdf_sources
- id (SERIAL, PK)
- filename
- upload_date
- uploaded_by (FK to users)
- file_url (Supabase Storage)

### exam_sessions
- id (SERIAL, PK)
- user_id (FK)
- start_time
- end_time
- total_questions
- correct_answers
- score_percentage
- passed (合格/不合格)

### exam_answers
- id (SERIAL, PK)
- exam_session_id (FK)
- question_id (FK)
- user_answer
- is_correct
- time_spent (秒)

### exam_settings
- id (SERIAL, PK)
- total_questions (デフォルト出題数)
- passing_score (合格ライン %)
- time_limit_minutes (制限時間、nullなら無制限)
- category_weights (JSONBでカテゴリ別出題比率)
- updated_at
- updated_by (FK)

### ai_generation_logs
- id (SERIAL, PK)
- prompt
- model
- generated_question_id (FK)
- created_at

## 6. 画面構成

### 一般ユーザー
1. ログイン/登録画面
2. ダッシュボード（学習履歴、次の試験開始）
3. 試験設定画面（カテゴリ選択、問題数選択）
4. 試験画面（問題表示、回答選択）
5. 結果画面（得点、解説、合格判定）
6. 履歴一覧画面
7. 履歴詳細画面
8. マイページ（プロフィール編集）

### 管理者
9. 管理ダッシュボード
10. 問題管理画面（一覧、作成、編集、削除）
11. PDF管理画面（アップロード、問題抽出）
12. 試験設定画面
13. ユーザー管理画面
14. 成績分析画面
15. AI設定画面

## 7. 開発フェーズ

### Phase 1: 基盤構築
- Next.jsプロジェクトセットアップ
- Supabaseプロジェクト作成
- 認証機能実装
- 基本的なルーティング

### Phase 2: データベース構築
- テーブル作成
- RLS (Row Level Security) 設定
- 初期データ投入

### Phase 3: 問題管理機能
- 問題CRUD機能
- カテゴリ管理
- PDF管理機能

### Phase 4: 試験機能
- 試験開始
- 問題表示
- 回答記録
- 採点・結果表示

### Phase 5: AI連携
- OpenAI API統合
- 問題生成機能
- 問題レビュー機能

### Phase 6: 分析・レポート機能
- 学習履歴表示
- 統計分析
- データエクスポート

### Phase 7: UI/UX改善
- デザイン最適化
- レスポンシブ対応
- パフォーマンス改善

## 8. 非機能要件

- **セキュリティ**: Supabase RLSによるデータアクセス制御
- **パフォーマンス**: Next.js ISR/SSRによる高速表示
- **スケーラビリティ**: Vercel + Supabaseで自動スケール
- **保守性**: TypeScriptによる型安全性、コンポーネント設計

## 9. 今後の拡張可能性

- 模擬試験モード（本番同様の時間制限）
- スマホアプリ化
- 他の資格試験への対応
- SNS共有機能
- 学習プラン提案機能
- 解説動画の追加
